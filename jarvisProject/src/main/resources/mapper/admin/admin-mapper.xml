<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="siteinfo">
	<update id="updateHeader" parameterType="pageinfo">
		update site_info set header_color=#{headerCol},logo_baground=#{logoBagCol},logo_font=#{logoFont},logo_fontsize=#{logoFontSize},icon_color=#{iconCol} where 1=1
	</update>
  	<update id="updateSide" parameterType="pageinfo">
		update site_info set profile_font=#{profileFont},menu_bcol=#{menuBcol},menu_fontcol=#{menuCol},menu_font=#{menuFont},dropdown_bcol=#{dropdownBcol} where 1=1
	</update>
	<update id="memberLock" parameterType="map">
		update member set block_date=sysdate+#{inputNo} where member_no=#{memberNo}
	</update>
	<update id="memberUnlock" parameterType="_int">
		update member set block_date=null where member_no=#{memberNo}
	</update>
	<update id="unlock">
		update member set block_date=null where block_date &lt; sysdate
	</update>
	<resultMap type="notify" id="notifyMap">
		<result column="notify_no" property="notifyNo"/>
		<result column="post_no" property="postNo"/>
		<result column="post_writer" property="postWriter"/>
		<result column="notify_writer" property="notifyWriter"/>
		<result column="notify_reason" property="notifyReason"/>
		<result column="notify_date" property="notifyDate"/>
	</resultMap>
	<select id="notifyList" resultMap="notifyMap">
		select * from notify order by notify_date desc
	</select>
	<select id="selectTotalCount" resultType="_int">
		select count(*) from notify
	</select>
	
	<!-- ìš© -->
	<insert id="insertPostNotify" parameterType="notify">
		INSERT INTO NOTIFY(NOTIFY_NO, POST_NO, POST_WRITER, NOTIFY_WRITER, NOTIFY_REASON, NOTIFY_DATE, STATUS)
		VALUES(notify_seq.nextval, #{postNo}, #{postWriter}, #{notifyWriter}, #{notifyReason}, systimestamp, default)
	</insert>
	
</mapper>